---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.js
  - vitest.config.js
  - playwright.config.js
  - src/colors.js
  - src/store.js
autonomous: true
requirements:
  - STAT-01
  - STAT-02

must_haves:
  truths:
    - "Vite dev server starts without errors"
    - "Zustand vanilla store creates with correct shape (direction, isSpinning, colorFamily, shadeIndex)"
    - "Store actions (setDirection, toggleSpinning, cycleShade) produce correct state transitions"
    - "colors.js exports 4 color families with 5-7 shades each"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "zustand"
    - path: "vite.config.js"
      provides: "Vite build configuration"
    - path: "src/colors.js"
      provides: "Color palette data for 4 families"
      exports: ["palette"]
    - path: "src/store.js"
      provides: "Zustand vanilla store with state and actions"
      exports: ["store"]
  key_links:
    - from: "src/store.js"
      to: "zustand/vanilla"
      via: "import createStore"
      pattern: "createStore.*zustand/vanilla"
    - from: "src/store.js"
      to: "src/colors.js"
      via: "imports palette for initial colorFamily"
      pattern: "import.*colors"
---

<objective>
Scaffold the Vite project, install all dependencies, and build the data and state layers that everything else depends on.

Purpose: Establish the project foundation — build tools, test runners, color palette data, and Zustand state management — so Plan 02 can wire DOM and animation without worrying about infrastructure.
Output: Working Vite project with colors.js (palette data) and store.js (Zustand vanilla store with actions).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite project and install dependencies</name>
  <files>package.json, vite.config.js, vitest.config.js, playwright.config.js</files>
  <action>
    Initialize a Vite 7.x vanilla JS project in the current directory (not a subdirectory):
    - Run `npm create vite@latest . -- --template vanilla` (use `.` for current dir, accept overwrite if prompted)
    - Install runtime dependency: `npm install zustand`
    - Install dev dependencies: `npm install -D vitest @vitest/browser playwright @playwright/test`
    - Create `vite.config.js` with minimal config: `import { defineConfig } from 'vite'; export default defineConfig({});`
    - Create `vitest.config.js` importing from vitest/config with default settings
    - Create `playwright.config.js` with basic config (webServer pointing to `npm run dev` on port 5173, use chromium project)
    - Clean up Vite template boilerplate: remove counter.js, javascript.svg, and default content from main.js. Keep the basic index.html shell and style.css (will be replaced in Plan 02)
    - Verify `npm run dev` starts without errors (start and immediately kill)
    - Ensure package.json scripts include: dev, build, preview, test (vitest)
  </action>
  <verify>
    - `npm run dev -- --host 2>&1 | head -5` shows Vite server starting
    - `node -e "import('zustand/vanilla').then(m => console.log('ok'))"` confirms zustand importable
    - `ls vite.config.js vitest.config.js playwright.config.js` all exist
  </verify>
  <done>
    Vite dev server starts, zustand is installed, test configs exist, template boilerplate is cleaned up.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create colors.js palette and store.js with Zustand vanilla store</name>
  <files>src/colors.js, src/store.js</files>
  <action>
    Create `src/colors.js`:
    - Export a `palette` object with 4 color families keyed by direction: `{ up: {...}, down: {...}, left: {...}, right: {...} }`
    - Each family has: `name` (string, e.g. "blue"), `shades` (array of 5-7 hex color strings from light to dark)
    - Color families: up=blue, down=green, left=orange, right=purple
    - Example shade array for blue: ['#e3f2fd', '#90caf9', '#42a5f5', '#1e88e5', '#1565c0', '#0d47a1']
    - Pure data module — no imports, no side effects, no DOM

    Create `src/store.js`:
    - Import `createStore` from `zustand/vanilla`
    - Import `palette` from `./colors.js`
    - Create and export `store` using `createStore` with initial state:
      ```
      {
        direction: null,        // 'up' | 'down' | 'left' | 'right' | null
        isSpinning: false,      // boolean
        colorFamily: 'up',      // key into palette
        shadeIndex: 0           // index into palette[colorFamily].shades
      }
      ```
    - Add actions inside the store creator:
      - `setDirection(dir)`: sets `direction` to dir, sets `isSpinning` to true, sets `colorFamily` to dir, resets `shadeIndex` to 0
      - `toggleSpinning()`: toggles `isSpinning` boolean
      - `cycleShade()`: increments `shadeIndex`, wrapping to 0 when exceeding palette[state.colorFamily].shades.length - 1
    - Actions use `set()` and `get()` from the store creator callback
    - Do NOT use React hooks — this is `zustand/vanilla` only
  </action>
  <verify>
    - `node -e "import('./src/colors.js').then(m => { const p = m.palette; console.log(Object.keys(p).length === 4 ? 'OK: 4 families' : 'FAIL'); console.log(p.up.shades.length >= 5 ? 'OK: shades' : 'FAIL'); })"` prints OK
    - `node -e "import('./src/store.js').then(m => { const s = m.store; console.log(s.getState()); s.getState().setDirection('up'); console.log(s.getState()); })"` shows state transition from null direction to 'up' with isSpinning=true
  </verify>
  <done>
    colors.js exports palette with 4 families of 5+ shades each. store.js exports Zustand vanilla store with correct shape (direction, isSpinning, colorFamily, shadeIndex) and working actions (setDirection, toggleSpinning, cycleShade). State transitions verified via getState().
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts Vite server without errors
2. `node -e "import('./src/store.js').then(m => { const s = m.store; s.getState().setDirection('left'); const st = s.getState(); console.log(st.direction === 'left' && st.isSpinning === true && st.colorFamily === 'left' && st.shadeIndex === 0 ? 'PASS' : 'FAIL'); })"` prints PASS
3. `node -e "import('./src/colors.js').then(m => console.log(Object.keys(m.palette).join(',')))"` prints `up,down,left,right`
</verification>

<success_criteria>
- Vite dev server starts cleanly
- Zustand store shape matches spec: { direction, isSpinning, colorFamily, shadeIndex }
- All 3 store actions work: setDirection sets direction+colorFamily+isSpinning, toggleSpinning flips boolean, cycleShade increments and wraps
- Color palette has 4 families (up/down/left/right) with 5+ shades each
- No template boilerplate remaining
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
